!function(){"use strict";function a(a,b,c){a.$state=b,a.$stateParams=c}function b(a,b){a.html5Mode({enabled:!0,requireBase:!1}),b.otherwise("/miner/")}angular.module("app",["app.core","app.home","app.underground-mining","app.office","app.resources","ui.router"]).run(a).config(b),a.$inject=["$rootScope","$state","$stateParams"],b.$inject=["$locationProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("app.core",[])}(),function(){"use strict";function a(a,c){function d(){function b(){g.levels.forEach(function(a){a.workers.forEach(function(a){c.add(a.dig())})})}function d(){function a(){var a={chance:0,quantity:0},b={};return i.names.forEach(function(c){b[c]=a}),b}i.names=c.getNames(),i[1]=angular.extend(a(),{coal:{chance:1,quantity:1}}),i[2]=angular.extend(a(),{coal:{chance:.95,quantity:2},iron:{chance:1,quantity:1}})}g.addLevel(),d(),a(b,1e3)}function e(){g.levels.push(new b(g.levels.length+1))}function f(){return Math.pow(60,g.levels.length)}var g={addLevel:e,getNewLevelCost:f,levels:[]};return d(),g}function b(a){var b=this;b.depth=a,b.workers=[]}function c(a){var b=this;b.depth=a}function d(a){for(var b=i[a],c=0;c<i.names.length;++c){var d=i.names[c];if(Math.random()<b[d].chance){var e={};return e[d]=b[d].quantity,e}}}function e(){var a=this;a.workers.push(new c(a.depth))}function f(){var a=this;return d(a.depth)}function g(){var a=this;return Math.pow(10,a.depth)*Math.pow(1.4,a.workers.length)}function h(){return d(this.depth)}angular.module("app.core").service("levels",a);var i={};a.$inject=["$interval","resources"],b.prototype.addWorker=e,b.prototype.dig=f,b.prototype.getNewWorkerCost=g,c.prototype.dig=h}(),function(){"use strict";function a(){function a(){c.cash=0}var c=new b;return a(),c}function b(a){function b(){i.forEach(function(a){c[a]=0}),c.add(a)}var c=this;return b(),c}function c(){Object.keys(h).forEach(function(a){i.push(a)})}function d(a){if(a){var b=Object.keys(a),c=this;i.forEach(function(d){-1!=b.indexOf(d)&&(c[d]+=a[d])})}}function e(){return angular.copy(h)}function f(a){return this[a]*h[a].cost}function g(){return angular.copy(i)}angular.module("app.core").service("resources",a);var h={coal:{name:"Coal",cost:1},iron:{name:"Iron",cost:Math.pow(5,1)},tin:{name:"Tin",cost:Math.pow(5,2)},copper:{name:"Copper",cost:Math.pow(5,3)},silver:{name:"Silver",cost:Math.pow(5,4)},gold:{name:"Gold",cost:Math.pow(5,5)}},i=[];c(),a.prototype.ResourcesList=b,b.prototype.add=d,b.prototype.getConfig=e,b.prototype.getCost=f,b.prototype.getNames=g}(),function(){"use strict";function a(a){var b={name:"home",templateUrl:"/js/app/home/home.template.html",title:"Mine",url:"/miner/"};a.state(b)}angular.module("app.home",["app.core","app.office","app.resources","ui.router"]).config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a){var b={name:"sell-center",templateUrl:"js/app/office/sell/sell.template.html",title:"Sell center",url:"/miner/sell"},c={name:"employee-center",templateUrl:"js/app/office/employee/employee.template.html",title:"Employee center",url:"/miner/employee"},d={name:"upgrade-center",templateUrl:"js/app/office/upgrade/upgrade.template.html",title:"Upgrade center",url:"/miner/upgrade"};a.state(b).state(c).state(d)}angular.module("app.office",["app.core","ui.router"]).config(a),a.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function a(a,b){function c(b){return b.getNewWorkerCost()<=a.cash}function d(b){a.cash-=b.getNewWorkerCost(),b.addWorker()}var e=this;e.canHire=c,e.hireWorker=d,e.levels=b}angular.module("app.office").controller("EmployeeCenterController",a),a.$inject=["resources","levels"]}(),function(){"use strict";function a(a){var b={bindToController:!0,controller:"EmployeeCenterController",controllerAs:"employeeCenter",restrict:"EA",templateUrl:"js/app/office/employee/employee-center.directive.html"};return b}angular.module("app.office").directive("mnrEmployeeCenter",a),a.$inject=[]}(),function(){"use strict";function a(a){function b(b){a.cash+=a.getCost(b),a[b]=0}var c=this;c.resources=a,c.sell=b}angular.module("app.office").controller("SellCenterController",a),a.$inject=["resources"]}(),function(){"use strict";function a(a){var b={bindToController:!0,controller:"SellCenterController",controllerAs:"sellCenter",restrict:"EA",templateUrl:"js/app/office/sell/sell-center.directive.html"};return b}angular.module("app.office").directive("mnrSellCenter",a),a.$inject=[]}(),function(){"use strict";function a(a,b){function c(){a.cash-=b.getNewLevelCost(),b.addLevel()}function d(){return b.getNewLevelCost()<=a.cash}var e=this;e.addLevel=c,e.canAddLevel=d,e.levels=b}angular.module("app.office").controller("UpgradeCenterController",a),a.$inject=["resources","levels"]}(),function(){"use strict";function a(a){var b={bindToController:!0,controller:"UpgradeCenterController",controllerAs:"upgradeCenter",restrict:"EA",templateUrl:"js/app/office/upgrade/upgrade-center.directive.html"};return b}angular.module("app.office").directive("mnrUpgradeCenter",a),a.$inject=[]}(),function(){"use strict";angular.module("app.resources",["app.core"])}(),function(){"use strict";function a(a){var b=this;b.resources=a}angular.module("app.resources").controller("InlineResourcesController",a),a.$inject=["resources"]}(),function(){"use strict";function a(){var a={bindToController:!0,controller:"InlineResourcesController",controllerAs:"inline",restrict:"EA",templateUrl:"js/app/resources/inline.directive.html"};return a}angular.module("app.resources").directive("mnrInlineResources",a),a.$inject=[]}(),function(){"use strict";angular.module("app.underground-mining",["app.core"])}(),function(){"use strict";function a(a,b){function c(b){a.add(b.dig())}var d=this;d.dig=c,d.levels=b,d.resources=a}angular.module("app.underground-mining").controller("MineController",a),a.$inject=["resources","levels"]}(),function(){"use strict";function a(){var a={bindToController:!0,controller:"MineController",controllerAs:"mine",restrict:"EA",templateUrl:"/js/app/underground-mining/mine.directive.html"};return a}angular.module("app.underground-mining").directive("mnrMine",a),a.$inject=[]}();
//# sourceMappingURL=app.min.js.map